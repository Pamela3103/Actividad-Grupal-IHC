<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EasyMeal</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500&family=Salsa&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="css/diario/styles.css" />
  
 
</head>
<body>
  <div id="modal">
    <div id="modal-content">
      <h3>Nueva receta</h3>
      <form id="form-receta" enctype="multipart/form-data">
        <div class="form-columns">
          <!-- Columna 1 -->
          <div class="col col1">
            <label for="imagen">Foto de la receta:</label>
            <input type="file" id="imagen" accept="image/*">
            <img id="preview" src="#" alt="Vista previa" style="display: none; width: 100%; border-radius: 10px; margin-top: 10px;" />
            <label for="nivel">Nivel de la receta:</label>
            <select id="nivel" required>
              <option disabled selected hidden>Selecciona un nivel</option>
              <option value="Fácil">Fácil</option>
              <option value="Intermedio">Intermedio</option>
              <option value="Master Chef">Master Chef</option>
            </select>

          </div>

          <!-- Columna 2 -->
          <div class="col col2">
            <label for="titulo">Título de la receta:</label>
            <textarea id="titulo" placeholder="Título de la receta"  required></textarea>

            <label for="nota">Nota o comentario:</label>
            <textarea id="nota" placeholder="Nota o comentario" rows="4" required></textarea>
          </div>

          <!-- Columna 3 -->
          <div class="col col3 opciones">
            <label for="resultado">Resultado:</label>
            <select id="resultado" required>
              <option disabled selected hidden>Selecciona una opción</option>
              <option value="Me encantó">Me encantó</option>
              <option value="Quedó bien">Quedó bien</option>
              <option value="Aceptable">Aceptable</option>
              <option value="No me salió">No me salió</option>
            </select>

            <label for="dificultad">Dificultad:</label>
            <select id="dificultad" required>
              <option disabled selected hidden>Selecciona una opción</option>
              <option value="Súper fácil">Súper fácil</option>
              <option value="Fácil de seguir">Fácil de seguir</option>
              <option value="Intermedia">Intermedia</option>
              <option value="Un poco difícil">Un poco difícil</option>
              <option value="Muy difícil">Muy difícil</option>
            </select>

            <label for="presentacion">Presentación:</label>
            <select id="presentacion" required>
              <option disabled selected hidden>Selecciona una opción</option>
              <option value="Muy bonita">Muy bonita</option>
              <option value="Bonita">Bonita</option>
              <option value="Normal">Normal</option>
              <option value="Podría mejorar">Podría mejorar</option>
              <option value="Fea">Fea</option>
            </select>

            <label for="tiempo">Tiempo:</label>
            <select id="tiempo" required>
              <option disabled selected hidden>Selecciona una opción</option>
              <option value="Rápido">Rápido</option>
              <option value="En el tiempo previsto">En el tiempo previsto</option>
              <option value="Muy demorado">Muy demorado</option>
            </select>
          </div>
        </div>

        <!-- Botones -->
        <div style="text-align: right; margin-top: 20px;">
          <button type="button" class="cancelar" onclick="cerrarModal()">Cancelar</button>
          <button type="submit" class="guardar">Guardar</button>
        </div>
      </form>
    </div>
  </div>
  
  <div id="confirm-modal" class="confirm-modal">
    <div class="confirm-content">
      <p>¿Estás seguro de que quieres salir? Se perderán los cambios.</p>
      <div class="confirm-buttons">
        <button id="confirm-yes">Sí, salir</button>
        <button id="confirm-no">Cancelar</button>
      </div>
    </div>
  </div>

  <div class="container">
    <!-- Sidebar -->
     
    <div class="sidebar">
      <div class="menu">
        <button><img src="assets/diario/icons/Home.png" alt=""></button>
        <button><img src="assets/diario/icons/Comida rápida.png" alt=""></button>
        <button><img src="assets/diario/icons/Calendario.png" alt=""></button>
        <button><img src="assets/diario/icons/Favoritos.png" alt=""></button>
        <button><img src="assets/diario/icons/Libreto.png" alt=""></button>
        <button><img src="assets/diario/icons/Exit.jpg" alt=""></button>
      </div>
    </div>

    <!-- Main content -->

    <div class="content">
      <div class="logo">
        <img src="assets/diario/icons/easymeal_logo.png" alt="EasyMeal Logo">
        <span class="easymeal-title">EasyMeal</span>
        <div class="header-right">
          <button><img src="assets/diario/icons/Notificación.png" alt="Notificación"></button>
          <button><img src="assets/diario/icons/User.png" alt="Usuario"></button>
        </div>
      </div>
      <!-- Header para diario de cocina -->
    <div class="header diario-header">
      <div class="title">
        <span class="main-title">MI DIARIO DE COCINA</span>
        <button class="add-button">+ Añadir</button>
      </div>
    </div>

    <!-- Filtros -->
    <div class="filters">
      <img src="assets/diario/icons/Filtros.png" alt="Icono filtro">
      <select id="filtro-resultado">
        <option disabled selected hidden>Resultado</option>
        <option value="Me encantó">Me encantó</option>
        <option value="Quedó bien">Quedó bien</option>
        <option value="Aceptable">Aceptable</option>
        <option value="No me salió">No me salió</option>
      </select>
      <select id="filtro-dificultad">
        <option disabled selected hidden>Dificultad</option>
        <option value="Súper fácil">Súper fácil</option>
        <option value="Fácil de seguir">Fácil de seguir</option>
        <option value="Intermedia">Intermedia</option>
        <option value="Un poco difícil">Un poco difícil</option>
        <option value="Muy difícil">Muy difícil</option>
      </select>
      <select id="filtro-presentacion">
        <option disabled selected hidden>Presentación</option>
        <option value="Muy bonita">Muy bonita</option>
        <option value="Bonita">Bonita</option>
        <option value="Normal">Normal</option>
        <option value="Podría mejorar">Podría mejorar</option>
        <option value="Fea">Fea</option>
      </select>
      <select id="filtro-tiempo">
        <option disabled selected hidden>Tiempo </option>
        <option value="Rápido">Rápido</option>
        <option value="En el tiempo previsto">Regular</option>
        <option value="Muy demorado">Muy demorado</option>
      </select>
      <button id="quitar-filtros"><img src="assets/diario/icons/Eliminar_filtro.png" alt=""> Quitar filtros</button>
    </div>


      <!-- Recipe Cards -->
      <style>
      .recipe-card {
        display: flex;
        align-items: flex-start;
        background: #fff;
        border-radius: 16px;
        box-shadow: 0 2px 8px rgba(0,0,0,0.06);
        padding: 16px;
        margin-bottom: 20px;
        max-width: 800px; /* Más ancho */
        min-width: 500px;
      }
      .recipe-card img {
        width: 140px;
        height: 140px;
        object-fit: cover;
        border-radius: 12px;
        margin-right: 28px;
      }
      .recipe-card .recipe-content {
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        flex: 1;
      }
      .recipe-card .title {
        font-size: 1.3rem;
        font-weight: 600;
        margin-bottom: 8px;
      }
      .recipe-card .nota {
        font-size: 1rem;
        color: #666;
        margin-bottom: 10px;
        margin-top: 2px;
      }
      .recipe-card .tags {
        display: flex;
        gap: 8px;
      }
      .recipe-card .tags span {
        background: #e6f7e6;
        color: #2e7d32;
        border-radius: 8px;
        padding: 4px 10px;
        font-size: 0.9rem;
      }
      .recipe-card .badge {
        margin-bottom: 8px;
        background: #e1ea2e;
        color: #020202;
        font-size: 0.9rem;
        font-weight: 500;
        border-radius: 6px;
        padding: 2px 10px;
        display: inline-block;
      }
      .recipe-grid {
        display: flex;
        flex-direction: column;
        gap: 20px;
      }
      </style>
      <div class="recipe-grid">
        <div class="recipe-card">
          <img src="assets/diario/cheesecake_fresa.png" alt="Cheesecake de Fresa"/>
          <div class="recipe-content">
        <div class="badge">Fácil</div>
        <div class="title">CHEESECAKE DE FRESA</div>
        <div class="nota">NOTA: Usar menos azúcar en la base y añadir ralladura de limón al relleno.</div>
        <div class="tags">
          <span>ME ENCANTÓ</span><span>FÁCIL DE SEGUIR</span> <span>BONITA</span> <span>REGULAR</span>
        </div>
          </div>
        </div>
        <div class="recipe-card">
          <img src="assets/diario/galletas.png" alt="Galletas con Chispas"/>
          <div class="recipe-content">
        <div class="badge">Fácil</div>
        <div class="title">GALLETAS CON CHISPAS</div>
        <div class="nota">NOTA: Probar con chispas oscuras y un poco de sal marina encima.</div>
        <div class="tags">
          <span>QUEDÓ BIEN</span><span>SÚPER FÁCIL</span><span>MUY BONITA</span><span>RÁPIDO</span>
        </div>
          </div>
        </div>
        <div class="recipe-card">
          <img src="assets/diario/yogurt_granola.jpg" alt="Yogurt con Granola"/>
          <div class="recipe-content">
        <div class="badge">Fácil</div>
        <div class="title">YOGURT CON GRANOLA</div>
        <div class="nota">NOTA: Tostar la granola con canela para más sabor y textura.</div>
        <div class="tags">
          <span>ME ENCANTÓ</span><span>SÚPER FÁCIL</span><span>NORMAL</span><span>RÁPIDO</span>
        </div>
          </div>
        </div>
        <div class="recipe-card">
          <img src="assets/diario/batidos_platano.jpg" alt="Batido de Platano"/>
          <div class="recipe-content">
        <div class="badge">Fácil</div>
        <div class="title">BATIDO DE PLATANO</div>
        <div class="nota">NOTA: Agregar hielo y unas gotas de limón para hacerlo más fresco.</div>
        <div class="tags">
          <span>ACEPTABLE</span><span>SÚPER FÁCIL</span><span>NORMAL</span><span>RÁPIDO</span>
        </div>
          </div>
        </div>
      </div>
    <div id="formulario">
  <h3>Agregar Receta</h3>
  <form>
    <input type="text" placeholder="Título de la receta" required>
    <textarea placeholder="Nota o comentario" rows="4" required></textarea>
    <button type="submit">Guardar</button>
    <button type="button" onclick="document.getElementById('formulario').style.display='none'">Cancelar</button>
  </form>
</div>
  <script>

    const modal = document.getElementById("modal");
    const botonAbrir = document.querySelector(".add-button");
    const formulario = document.querySelector("#modal-content form");

    botonAbrir.addEventListener("click", () => {
      formulario.reset(); // Limpiar campos
      const preview = document.getElementById("preview");
      if (preview) preview.style.display = "none"; // Ocultar imagen si estaba cargada
      modal.style.display = "flex"; // Mostrar modal
    });


    function cerrarModal() {
      document.getElementById("confirm-modal").style.display = "flex";
    }

    // Botones del modal de confirmación
    document.getElementById("confirm-yes").addEventListener("click", () => {
      document.getElementById("modal").style.display = "none";
      document.getElementById("confirm-modal").style.display = "none";
    });

    document.getElementById("confirm-no").addEventListener("click", () => {
      document.getElementById("confirm-modal").style.display = "none";
    });



    // También permite cerrar al hacer clic fuera del modal
    window.addEventListener("click", (e) => {
      if (e.target === modal) {
        cerrarModal();
      }
    });

    const inputImagen = document.getElementById("imagen");
    const preview = document.getElementById("preview");

    inputImagen.addEventListener("change", () => {
      const file = inputImagen.files[0];
      if (file) {
        preview.src = URL.createObjectURL(file);
        preview.style.display = "block";
      }
    });

    //EVENTOS AL GUARDAR LA RECETA
    document.getElementById("form-receta").addEventListener("submit", function (e) {
      e.preventDefault(); // Prevenir que se recargue la página

      const titulo = document.getElementById("titulo").value;
      const nota = document.getElementById("nota").value;
      const nivel = document.getElementById("nivel").value;
      const resultado = document.getElementById("resultado").value;
      const dificultad = document.getElementById("dificultad").value;
      const presentacion = document.getElementById("presentacion").value;
      const tiempo = document.getElementById("tiempo").value;
      const imagenInput = document.getElementById("imagen");
      const imagenArchivo = imagenInput.files[0];

      if (
        resultado === "Selecciona una opción" ||
        dificultad === "Selecciona una opción" ||
        presentacion === "Selecciona una opción" ||
        tiempo === "Selecciona una opción" ||
        nivel === "Selecciona un nivel"
      ) {
        alert("Por favor, completa todos los campos antes de guardar.");
        return; // No continúa si falta algo
      }

      const reader = new FileReader();

      reader.onload = function (event) {
        const recetaHTML = `
          <div class="recipe-card">
            <img src="${event.target.result}" alt="${titulo}" />
            <div class="recipe-content">
              <div class="badge">${nivel}</div>
              <div class="title">${titulo.toUpperCase()}</div>
              <div class="nota">NOTA: ${nota}</div>
              <div class="tags">
                <span>${resultado.toUpperCase()}</span>
                <span>${dificultad.toUpperCase()}</span>
                <span>${presentacion.toUpperCase()}</span>
                <span>${tiempo.toUpperCase()}</span>
              </div>
            </div>
          </div>
        `;

        const contenedor = document.querySelector(".recipe-grid");
        contenedor.insertAdjacentHTML("beforeend", recetaHTML);

        // Cierra el modal y limpia el formulario
        modal.style.display = "none";
        document.getElementById("form-receta").reset();
        const preview = document.getElementById("preview");
        if (preview) preview.style.display = "none";
      };

      if (imagenArchivo) {
        reader.readAsDataURL(imagenArchivo); // Carga imagen
      } else {
        alert("Por favor selecciona una imagen");
      }
    });

    // Filtros
    function filtrarPorUnSoloFiltro(idFiltro) {
      const valorSeleccionado = document.getElementById(idFiltro).value.toUpperCase();
      const tarjetas = document.querySelectorAll('.recipe-card');

      tarjetas.forEach(card => {
        const tags = Array.from(card.querySelectorAll('.tags span')).map(tag => tag.textContent.toUpperCase());
        const coincide = tags.includes(valorSeleccionado);
        card.style.display = coincide ? 'flex' : 'none';
      });
    }

    document.getElementById("filtro-resultado").addEventListener("change", () => {
      filtrarPorUnSoloFiltro("filtro-resultado");
    });

    document.getElementById("filtro-dificultad").addEventListener("change", () => {
      filtrarPorUnSoloFiltro("filtro-dificultad");
    });

    document.getElementById("filtro-presentacion").addEventListener("change", () => {
      filtrarPorUnSoloFiltro("filtro-presentacion");
    });

    document.getElementById("filtro-tiempo").addEventListener("change", () => {
      filtrarPorUnSoloFiltro("filtro-tiempo");
    });

    // Botón para quitar filtros y mostrar todo
    document.getElementById("quitar-filtros").addEventListener("click", () => {
      document.querySelectorAll("select").forEach(select => {
        select.selectedIndex = 0;
      });
      document.querySelectorAll('.recipe-card').forEach(card => {
        card.style.display = 'flex';
      });
    });

  </script>
</body>

</html>


